# ============================================================================
# STT Service Environment Configuration
# Copy this file to .env and customize for your environment
# ============================================================================

# ============================================================================
# Compute Device Configuration
# ============================================================================
# COMPUTE_DEVICE options: "cuda", "cpu", "mps" (Apple Silicon)
# - cuda: Use NVIDIA GPU
# - cpu: Use CPU only
# - mps: Use Apple Silicon GPU (Metal Performance Shaders)
COMPUTE_DEVICE=cuda

# ============================================================================
# GPU Configuration (CUDA only)
# ============================================================================
# Which GPU device to use (0 for first GPU, 1 for second, etc.)
GPU_DEVICE_ID=0
CUDA_VISIBLE_DEVICES=0
NVIDIA_VISIBLE_DEVICES=0

# CUDA memory fraction (0.0-1.0, e.g., 0.95 = 95% of GPU memory)
CUDA_MEMORY_FRACTION=0.95

# ============================================================================
# Model Configuration
# ============================================================================
# Whisper model size (tiny, base, small, medium, large-v2, large-v3)
# Recommended:
#   - tiny/base: Fast, low accuracy, minimal VRAM (~1-2GB)
#   - small/medium: Balanced, moderate VRAM (~3-5GB)
#   - large-v2/large-v3: Best accuracy, high VRAM (~8-10GB)
WHISPER_MODEL=large-v3

# Model storage path (inside container)
MODEL_PATH=/app/models

# Local path for model storage (bind mount)
MODELS_PATH=./models

# ============================================================================
# Server Configuration
# ============================================================================
# WebSocket server port
STT_PORT=8001

# Monitoring/metrics port
STT_MONITORING_PORT=9091

# Maximum concurrent WebSocket connections
STT_MAX_CONNECTIONS=50

# Logging level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Local path for log storage (bind mount)
LOGS_PATH=./logs

# ============================================================================
# Resource Limits
# ============================================================================
# Memory limit for container (e.g., 32g, 16g, 8g)
MEM_LIMIT=32g

# Shared memory size for container (e.g., 2g, 1g)
SHM_SIZE=2g

# ============================================================================
# Network Configuration
# ============================================================================
# Docker network subnet for inter-service communication
NETWORK_SUBNET=172.20.0.0/16
NETWORK_GATEWAY=172.20.0.1

# ============================================================================
# Production Settings (Optional)
# ============================================================================
# Enable TLS/SSL (requires certificate setup)
# ENABLE_TLS=false
# TLS_CERT_PATH=/app/ssl/cert.pem
# TLS_KEY_PATH=/app/ssl/key.pem

# Enable authentication (requires auth token setup)
# ENABLE_AUTH=false
# AUTH_TOKEN_SECRET=your-secret-key-here

# Enable rate limiting
# RATE_LIMIT_ENABLED=false
# RATE_LIMIT_MAX_REQUESTS=100
# RATE_LIMIT_WINDOW_SECONDS=60
